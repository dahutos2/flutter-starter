## プロジェクトの開発環境を作成する(説明)

### 1. S3バケット

**サービス名**: Amazon S3 (Simple Storage Service)

**概要**:
- S3バケットは、ビルドアーティファクト（例：生成されたAPKファイル）を保存するためのストレージとして機能します。
- このバケットは、バージョニングが有効になっており、複数バージョンのファイルを保存することができます。

**設定**:
- **バケット名**: `my-project-s3`（プロジェクト名に基づく）
- **バージョニング**: 有効

**役割**:
- CodeBuildがビルドした成果物（APKファイル）を保存します。
- ビルドプロセス中の依存関係やキャッシュファイル（Flutter SDK、Android SDK、Gradleキャッシュなど）を保存します。

### 2. CodeCommitリポジトリ

**サービス名**: AWS CodeCommit

**概要**:
- CodeCommitリポジトリは、プロジェクトのソースコードを管理するためのGit互換リポジトリです。
- 開発者はこのリポジトリにコードをプッシュし、バージョン管理を行います。

**設定**:
- **リポジトリ名**: `my-project-repo`（プロジェクト名に基づく）
- **リポジトリの説明**: プロジェクトの概要を示す説明文が設定されます。

**役割**:
- プロジェクトのソースコードを格納し、バージョン管理を行います。
- CodePipelineのソースステージで使用され、特定のブランチへの変更が検出されるとパイプラインがトリガーされます。

### 3. CodeBuildプロジェクト

**サービス名**: AWS CodeBuild

**概要**:
- CodeBuildは、継続的インテグレーション（CI）のためのビルドサービスです。
- ソースコードをコンパイルし、テストを実行し、ビルド成果物を生成します。

**設定**:
- **プロジェクト名**: `my-project-build`（プロジェクト名に基づく）
- **ソース**: CodeCommitリポジトリ `my-project-repo` のコードを使用
- **環境**: `aws/codebuild/standard:5.0`イメージを使用するLinuxコンテナ
- **ビルド仕様**: ビルドプロセスを定義する `buildspec.yml` を使用
  - Flutter SDK、Android SDK、Gradleキャッシュのインストールと設定
  - Flutterアプリのビルド（リリースAPKの生成）
  - ビルド成果物のS3バケットへのアップロード

**役割**:
- ソースコードをビルドし、リリース用のAPKファイルを生成します。
- ビルドに必要な依存関係をキャッシュし、ビルド時間を短縮します。

### 4. CodePipeline

**サービス名**: AWS CodePipeline

**概要**:
- CodePipelineは、継続的デリバリー（CD）用のパイプラインサービスです。
- ソースコードの変更からビルド、テスト、デプロイまでの一連のプロセスを自動化します。

**設定**:
- **パイプライン名**: `my-project-pipeline`（プロジェクト名に基づく）
- **ソースステージ**: CodeCommitリポジトリ `my-project-repo` の特定ブランチ（例：`release`）に変更がプッシュされるとトリガーされます。
- **ビルドステージ**: CodeBuildプロジェクト `my-project-build` を使用してソースコードをビルドします。
- **デプロイステージ**: S3バケット `my-project-s3` にビルド成果物をアップロードします。

**役割**:
- ソースコードの変更を検出し、自動的にビルドおよびデプロイを実行します。
- 継続的な統合とデリバリーを実現し、開発プロセスを効率化します。

### 5. 作成されるサービスの流れ

1. **CodeCommitリポジトリ**にソースコードをプッシュします。
2. **CodePipeline**のソースステージが変更を検出し、パイプラインをトリガーします。
3. **CodePipeline**は**CodeBuildプロジェクト**を実行し、ソースコードをビルドします。
4. **CodeBuild**はリリース用のAPKファイルを生成し、**S3バケット**にアップロードします。
5. **S3バケット**に保存されたビルド成果物（APKファイル）をダウンロードして使用します。

これにより、プロジェクトのソースコードが変更されるたびに、自動的にビルドとデプロイが実行される継続的インテグレーション/デリバリー（CI/CD）パイプラインが構築されます。